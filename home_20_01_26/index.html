<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel" src="./header.js"></script>
    <script type="text/babel" src="./card.js"></script>
    <script type="text/babel" src="./footer.js"></script>

    <link rel="stylesheet" href="./style.css">
</head>

<body>

</body>
<script type="text/babel">
    const catalogLink =
        "https://corsproxy.io/?" +
        encodeURIComponent("https://common-api.rozetka.com.ua/v1/api/product/details?country=UA&lang=ua&ids=366021717,380675844,405355407,406474260,463113994,463113999,463477094,464301384,467327129,471430844,505332659,505332724,520436724,533406834,553803978,554440110,566890633,567062611,567810715,569751688");



    async function getProducts(link) {
        const res = await fetch(link, {
            method: "GET",
        });
        if (!res.ok) throw new Error('Ошибка загрузки каталога');
        const json = await res.json();
        return json.data;
    }

    async function main() {
        const list = await getProducts(catalogLink);

        const root = ReactDOM.createRoot(document.getElementsByTagName("body")[0]);
        root.render(
            <>
                <Header></Header>
                <main>
                    <aside class="sidebar">
                        <nav class="catalog-nav">
                            <ul class="catalog-list">
                                <li class="catalog-item">
                                    <a href="#">Ноутбуки и компьютеры</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Смартфоны, ТВ и электроника</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Бытовая техника</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Товары для дома</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Инструменты и автотовары</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Детские товары</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Спорт и увлечения</a>
                                </li>
                                <li class="catalog-item">
                                    <a href="#">Одежда и обувь</a>
                                </li>
                            </ul>
                        </nav>
                    </aside>
                    <section className="catalog" style={{ display: "flex", flexDirection: "row", flexWrap: "wrap", gap: "1px" }}>
                        {list.map(item => (
                            <Card
                                key={item.id}
                                id={item.id}
                                href={item.href}
                                previewImg={item.images?.main}
                                name={item.title}
                                price={item.price}
                            />
                        ))}
                    </section>
                </main>
                <Footer></Footer>
            </>
        );
    }

    main();
</script>

</html>